<?xml version="1.0" encoding="UTF-8"?>
<jube>
    <parameterset name="compile_parameters">
      <parameter name="load_modules">Intel IntelMPI FFTW/3.3.4</parameter>
      <parameter name="repo">git@github.com:maxlevesque/mdft-dev.git</parameter>
      <parameter name="branch" tag="!test">Feature-jube</parameter>
      <parameter name="branch" tag="test">test</parameter>
      <parameter name="make_target"></parameter>
    </parameterset>

    <compilation_dos>
      <use>systemParameter</use>
      <do>echo "============= compilation : $compile_mode =========="</do>
      <do>git clone $repo</do>
      <do>echo "load modules $load_modules"</do>
      <do>module purge</do>
      <do>module load $load_modules</do>
      <do>module load CMake</do>
      <do active="$compile_scalasca">module load Scalasca</do>
      <do active="$compile_scalasca">echo "load module scalasca"</do>
      <do work_dir="mdft-dev">echo "checkout in $branch"</do>
      <do work_dir="mdft-dev">git checkout $branch</do>
      <do work_dir="mdft-dev">mkdir build</do>
      <do work_dir="mdft-dev/build">$cmake_line</do>
      <do work_dir="mdft-dev/build">make -j VERBOSE=1</do>
    </compilation_dos>	

    <parameterset name="inputParameter">
      <parameter name="soluteFile" tag="!lysozyme">input/solute.in.jube</parameter>
      <parameter name="soluteFile" tag="lysozyme">input/lysozyme.in.jube</parameter>
      <parameter name="mmax">1</parameter>
      <parameter name="mmax" tag="mmax3">3</parameter>
      <parameter name="mmax" tag="mmax5">5</parameter>
      <parameter name="mmax" tag="benchMmax">1,2,3</parameter>
      <parameter name="boxnod">64</parameter>
      <parameter name="boxnod" tag="boxnod128">128</parameter>
      <parameter name="boxnod" tag="boxnod256">256</parameter>
      <parameter name="boxnod" tag="benchBoxnod">64,128,256</parameter>
      <parameter name="boxlen" mode="python">{"64" :"25.",
											  "128":"50.",
											  "256":"100."}.get("${benchBoxnod}", "25.")</parameter>
      <parameter name="boxlen" tag="boxlen50">50.</parameter>
      <parameter name="bulkdensity">0.033</parameter>
      <parameter name="temperature">298.15</parameter>
    </parameterset>

</jube>
